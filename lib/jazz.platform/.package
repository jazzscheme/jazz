(package jazz.platform
  
  (root "src")
  (products (platform (alias jazz.platform))
            (jazz.platform (unit jazz.platform.product)
                           (update jazz.platform
                                   jazz.platform.product
                                   (cond
                                     (windows jazz.platform.cairo)
                                     (else jazz.platform.cairo
                                           jazz.platform.cairo.cairo-base
                                           jazz.platform.freetype))
                                   jazz.platform.types
                                   jazz.platform.types-syntax
                                   jazz.platform.crash
                                   (cond
                                     (carbon jazz.platform.crash.carbon)
                                     (windows jazz.platform.crash.windows)
                                     (x11 jazz.platform.crash.x11))
                                   (cond (mac jazz.platform.carbon.carbon-types
                                              jazz.platform.carbon.clipboard))
                                   project.jazz.platform.Platform-Manifest)
                           (library
                             (link-options
                                (windows (libdir "~~jazz/foreign/cairo/lib/windows")
                                         (libdir "~~jazz/foreign/windows/lib")
                                         "-lcairo"
                                         "-mwindows"
                                         "-lole32" "-loleaut32"
                                         "-lwinmm" "-lpdh")
                                (mac  (pkg-config "--libs" "cairo") "-framework" "Carbon")
                                (else (pkg-config "--libs" "cairo"))))
                           (dependencies jazz)))
  (project (Platform-Manifest (unit project.jazz.platform.Platform-Manifest))))
