(library jazz.media.platform.windows jazz


(import (jazz.io)
        (jazz.platform.windows))


;;;
;;;; Sound
;;;


(definition public (play-sound sound (asynchronous?: asynchronous? #t))
  (let ((async-bit (if asynchronous? SND_ASYNC SND_SYNC)))
    (if (file? sound)
        (PlaySound (platform-parse~ sound) NULL (bitwise-ior SND_FILENAME async-bit))
      (PlaySound sound NULL async-bit))))


;;;
;;;; Music
;;;


(definition public (open-music file alias)
  (mciSendString (format "open \"{a}\" type MPEGVideo alias {a}" (platform-parse~ file) alias) NULL 0 0))

(definition public (close-music alias)
  (mciSendString (format "close {a}" alias) NULL 0 0))


(definition public (play-music alias)
  (mciSendString (format "play {a}" alias) NULL 0 0))

(definition public (stop-music alias)
  (mciSendString (format "stop {a}" alias) NULL 0 0))


(definition public (pause-music alias)
  (mciSendString (format "pause {a}" alias) NULL 0 0))

(definition public (resume-music alias)
  (mciSendString (format "resume {a}" alias) NULL 0 0)))
