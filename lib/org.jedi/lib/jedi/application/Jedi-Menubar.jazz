;;;==============
;;;  JazzScheme
;;;==============
;;;
;;;; Jedi Menubar
;;;
;;;  The contents of this file are subject to the Mozilla Public License Version
;;;  1.1 (the "License"); you may not use this file except in compliance with
;;;  the License. You may obtain a copy of the License at
;;;  http://www.mozilla.org/MPL/
;;;
;;;  Software distributed under the License is distributed on an "AS IS" basis,
;;;  WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
;;;  for the specific language governing rights and limitations under the
;;;  License.
;;;
;;;  The Original Code is JazzScheme.
;;;
;;;  The Initial Developer of the Original Code is Guillaume Cartier.
;;;  Portions created by the Initial Developer are Copyright (C) 1996-2007
;;;  the Initial Developer. All Rights Reserved.
;;;
;;;  Contributor(s):
;;;
;;;  Alternatively, the contents of this file may be used under the terms of
;;;  the GNU General Public License Version 2 or later (the "GPL"), in which
;;;  case the provisions of the GPL are applicable instead of those above. If
;;;  you wish to allow use of your version of this file only under the terms of
;;;  the GPL, and not to allow others to use your version of this file under the
;;;  terms of the MPL, indicate your decision by deleting the provisions above
;;;  and replace them with the notice and other provisions required by the GPL.
;;;  If you do not delete the provisions above, a recipient may use your version
;;;  of this file under the terms of any one of the MPL or the GPL.
;;;
;;;  See www.jazzscheme.org for details.


(library jedi.application.Jedi-Menubar jazz


(import (jazz.ide)
        (jazz.jml)
        (jazz.library)
        (jazz.ui)
        (jedi))


(class Jedi-Menubar extends Menubar

  
  ;;;
  ;;;; Host
  ;;;
  
  
  (method meta (host-icon)
    {Bitmap-Resource "Document"})
  

  (method meta (host-title)
    "Text")
  
  
  ;;;
  ;;;; Menubar
  ;;;
  
  
  (method (install rest)
    (nextmethod rest)
    (with-update-locked
      (function ()
        (new Label-Item parent: self name: 'file      children: (list (new IDE-File-Menu)))
        (new Label-Item parent: self name: 'edit      children: (list (new Edit-Menu)))
        (new Label-Item parent: self name: 'view      children: (list (new View-Menu)))
        (new Label-Item parent: self name: 'search    children: (list (new Search-Menu)))
        @convert
        (new Label-Item parent: self name: 'project   children: (list (new Project-Menu)))
        @convert
        (new Label-Item parent: self name: 'run       children: (list (new Run-Menu)))
        (new Label-Item parent: self name: 'debug     children: (list (new Debug-Menu)))
        (new Label-Item parent: self name: 'tools     children: (list (new Tools-Menu)))
        (new Label-Item parent: self name: 'workspace children: (list (new Workspace-Menu)))
        (new Label-Item parent: self name: 'window    children: (list (new Window-Advanced-Menu)))
        (new Label-Item parent: self name: 'help      children: (list (new Help-Menu)))))
    (layout-menu~ (child '(workspace content select content)))))


;;;
;;;; View-Menu
;;;


(class View-Menu extends Menu
  
  
  (form
    (<install>                                      title: "&View"
      (<Label-Item>     name: workbench             title: "&Workbench" icon: {Bitmap-Resource "ProjectsManager"} action: {Action jedi view-workbench})
      @waiting
      (<Label-Item>     name: repositories          title: "&Repositories" icon: {Bitmap-Resource "Repository"} action: {Action jedi view-repositories})
      @waiting
      (<Label-Item>     name: favorites             title: "&Favorites" icon: {Bitmap-Resource "Favorites"} action: {Action jedi view-favorites})
      @waiting
      (<Label-Item>     name: contacts              title: "&Contacts" icon: {Bitmap-Resource "MsgUser"} action: {Action jedi view-contacts})
      (<Separator-Item>)
      (<Label-Item>     name: console               title: "&Console" icon: {Bitmap-Resource "Console"} action: {Action jedi view-console})
      @waiting
      (<Label-Item>     name: properties            title: "&Properties" icon: {Bitmap-Resource "Properties"} action: {Action jedi view-properties})
      (<Label-Item>     name: search-results        title: "&Searches" icon: {Bitmap-Resource "Find"} action: {Action jedi view-search-results})
      @waiting
      (<Label-Item>     name: output-log            title: "&Output Log" icon: {Bitmap-Resource "Spy"} action: {Action jedi view-output-log})
      @waiting
      (<Label-Item>     name: user-log              title: "&User Log" icon: {Bitmap-Resource "Log"} action: {Action jedi view-user-log})
      @waiting
      (<Label-Item>     name: activities            title: "&Activities" icon: {Bitmap-Resource "Task"} action: {Action jedi view-activities})
      (<Label-Item>     name: web-servers           title: "&Servers" icon: {Bitmap-Resource "Servers"} action: {Action jedi view-web-servers})
      (<Separator-Item>)
      @waiting
      (<Label-Item>                                 title: "&COM" icon: {Bitmap-Resource "Reference"}
        (<Menu>
          (<Label-Item> name: registry-viewer       title: "Re&gistry Viewer" icon: {Bitmap-Resource "Reference"} action: {Action jedi view-registry-viewer})
          (<Label-Item> name: type-viewer           title: "T&ype Viewer" icon: {Bitmap-Resource "Browser"} action: {Action jedi view-type-viewer})))
      @waiting
      (<Label-Item>                                 title: "&Designer" icon: {Bitmap-Resource "Sorcerer"}
        (<Menu>
          (<Label-Item> name: toolbox               title: "&Toolbox" icon: {Bitmap-Resource "Toolbox"} action: {Action jedi view-toolbox})
          (<Label-Item> name: descendants           title: "&Descendants" icon: {Bitmap-Resource "Components"} action: {Action jedi view-descendants})
          (<Label-Item> name: branches              title: "&Branches" icon: {Bitmap-Resource "Branches"} action: {Action jedi view-branches})))
      (<Label-Item>                                 title: "&Preferences" icon: {Bitmap-Resource "Preferences"}
        (<Menu>
          (<Label-Item> name: bindings              title: "&Key Bindings" icon: {Bitmap-Resource "EditLink"} action: {Action jedi view-bindings})
          @waiting
          (<Label-Item> name: preferences           title: "&Preferences Manager" icon: {Bitmap-Resource "Preferences"} action: {Action jedi view-preferences})))
      @waiting
      (<Label-Item>                                 title: "&Java" icon: {Bitmap-Resource "Java"}
        (<Menu>
          (<Label-Item> name: java-manager          title: "&Java Manager" icon: {Bitmap-Resource "Java"} action: {Action jedi view-java-manager})))
      @waiting
      (<Label-Item>                                 title: "&SQL" icon: {Bitmap-Resource "Databases"}
        (<Menu>
          (<Label-Item> name: sql-connections       title: "SQL &Connections" icon: {Bitmap-Resource "Databases"} action: {Action jedi view-sql-connections})
          (<Label-Item> name: sql-inventory         title: "SQL &Inventory" icon: {Bitmap-Resource "Database"} action: {Action jedi view-sql-inventory})
          (<Label-Item> name: sql-console           title: "&SQL Console" icon: {Bitmap-Resource "Console"} action: {Action jedi view-sql-console})))
      (<Label-Item>                                 title: "&Text" icon: {Bitmap-Resource "WorkspaceText"}
        (<Menu>
          (<Label-Item> name: chapters              title: "&Chapters" icon: {Bitmap-Resource "Branches"} action: {Action jedi view-chapters})
          (<Label-Item> name: hierarchy             title: "&Hierarchy" icon: {Bitmap-Resource "Components"} action: {Action jedi view-hierarchy})))
      @waiting
      (<Label-Item>                                 title: "&Showcase" icon: {Bitmap-Resource "DesignLayout"}
        (<Menu>
          @waiting (<Label-Item> name: documentation-editor  title: "Documentation &Editor" icon: {Bitmap-Resource "Doc"} action: {Action jedi view-documentation-editor})
          (<Label-Item> name: showcase              title: "&User Interface Showcase" icon: {Bitmap-Resource "DesignLayout"} action: {Action jedi view-showcase}))))))


;;;
;;;; Project-Menu
;;;


(class Project-Menu extends Menu
  
  
  (form
    (<install>                                title: "&Project"
      (<Label-Item>     name: edit            title: "&Edit" icon: {Bitmap-Resource "Edit"} action: {Action jedi edit-project})
      (<Separator-Item>)
      (<Label-Item>     name: compile         title: "&Compile" icon: {Bitmap-Resource "Compile"} action: {Action jedi compile-file})
      (<Label-Item>     name: build           title: "&Build" icon: {Bitmap-Resource "Build"} action: {Action jedi build-project})
      (<Label-Item>     name: view-log        title: "&View Log" action: {Action jedi view-project-log})
      (<Separator-Item>)
      (<Label-Item>     name: references      title: "&Analyse References..." action: {Action jedi analyse-project-references})
      (<Separator-Item>)
      (<Label-Item>     name: execute         title: "&Execute" icon: {Bitmap-Resource "Execute"} action: {Action jedi execute-project})
      (<Label-Item>     name: launch          title: "&Launch" icon: {Bitmap-Resource "Continue"} action: {Action jedi launch-project}))))


;;;
;;;; Run-Menu
;;;


(class Run-Menu extends Menu
  
  
  (form
    (<install>                             title: "&Run"
      (<Label-Item>     name: break        title: "&Break" icon: {Bitmap-Resource "Break"} action: {Action debugger break})
      (<Label-Item>     name: continue     title: "&Continue" icon: {Bitmap-Resource "Run"} action: {Action debugger continue})
      (<Label-Item>     name: stop         title: "&Stop" icon: {Bitmap-Resource "Stop"} action: {Action debugger stop})
      (<Label-Item>     name: toplevel     title: "&Toplevel" action: {Action debugger toplevel})
      (<Separator-Item>)
      (<Label-Item>     name: debuggers    title: "&Debuggers" icon: {Bitmap-Resource "Process"} action: {Action debugger debuggers})
      (<Label-Item>     name: variables    title: "&Variables" icon: {Bitmap-Resource "Spy"} action: {Action debugger variables})
      @wait
      (<Separator-Item>)
      @wait
      (<Label-Item>     name: next-process title: "Ne&xt Process" action: {Action debugger next-debuggee}))))


;;;
;;;; Debug-Menu
;;;


(class Debug-Menu extends Menu
  
  
  (form
    (<install>                                          title: "&Debug"
      (<Label-Item>         name: debug-view            title: "&Debug View" action: {Action jedi debug-view})
      (<Label-Item>         name: class-browser         title: "&Class Browser" icon: {Bitmap-Resource "Class"} action: {Action jedi class-browser})
      (<Separator-Item>)
      (<Label-Item>                                     title: "&Test" icon: {Bitmap-Resource "Script"}
        (<Menu>
          (<Label-Item>     name: test                  title: "&Test" tooltip?: #t tooltip-text: "Test" action: {Action jedi test})
          (<Label-Item>     name: test-shift            title: "&Test Shift" action: {Action jedi test-shift})
          (<Separator-Item>)
          (<Label-Item>     name: test-1                title: "&Execute Script 1" tooltip?: #t tooltip-text: "Execute Script" action: {Action jedi test-1})
          (<Label-Item>     name: test-2                title: "&Execute Script 2" tooltip?: #t tooltip-text: "Execute Script" action: {Action jedi test-2})
          (<Label-Item>     name: test-3                title: "&Execute Script 3" tooltip?: #t tooltip-text: "Execute Script" action: {Action jedi test-3})
          (<Label-Item>     name: test-4                title: "&Execute Script 4" tooltip?: #t tooltip-text: "Execute Script" action: {Action jedi test-4})
          (<Label-Item>     name: test-5                title: "&Execute Script 5" tooltip?: #t tooltip-text: "Execute Script" action: {Action jedi test-5})
          (<Label-Item>     name: test-6                title: "&Execute Script 6" tooltip?: #t tooltip-text: "Execute Script" action: {Action jedi test-6})
          (<Label-Item>     name: test-7                title: "&Execute Script 7" tooltip?: #t tooltip-text: "Execute Script" action: {Action jedi test-7})
          (<Label-Item>     name: test-8                title: "&Execute Script 8" tooltip?: #t tooltip-text: "Execute Script" action: {Action jedi test-8})
          (<Label-Item>     name: test-9                title: "&Execute Script 9" tooltip?: #t tooltip-text: "Execute Script" action: {Action jedi test-9})
          (<Label-Item>     name: test-0                title: "&Execute Script 0" tooltip?: #t tooltip-text: "Execute Script" action: {Action jedi test-0})))))
  
  
  @wait
  (form
    (<install>                                          title: "&Debug"
      (<Label-Item>         name: debug-view            title: "&Debug View" action: {Action jedi debug-view})
      @convert
      (<Label-Item>         name: explore-views         title: "&Explore Views" action: {Action jedi explore-views})
      (<Separator-Item>)
      @convert
      (<Label-Item>                                     title: "&Spy" icon: {Bitmap-Resource "Spy"}
        (<Menu>
          (<Label-Item>     name: spy-messages          title: "Message Sp&y" action: {Action jedi spy-messages})
          (<Label-Item>     name: spy-events            title: "Event Sp&y" action: {Action jedi spy-events})))
      (<Label-Item>                                     title: "&Test" icon: {Bitmap-Resource "Script"}
        (<Menu>
          (<Label-Item>     name: test                  title: "&Test" tooltip?: #t tooltip-text: "Test" action: {Action jedi test})
          (<Label-Item>     name: test-shift            title: "&Test Shift" action: {Action jedi test-shift})
          (<Separator-Item>)
          (<Label-Item>     name: test-1                title: "&Execute Script 1" tooltip?: #t tooltip-text: "Execute Script" action: {Action jedi test-1})
          (<Label-Item>     name: test-2                title: "&Execute Script 2" tooltip?: #t tooltip-text: "Execute Script" action: {Action jedi test-2})
          (<Label-Item>     name: test-3                title: "&Execute Script 3" tooltip?: #t tooltip-text: "Execute Script" action: {Action jedi test-3})
          (<Label-Item>     name: test-4                title: "&Execute Script 4" tooltip?: #t tooltip-text: "Execute Script" action: {Action jedi test-4})
          (<Label-Item>     name: test-5                title: "&Execute Script 5" tooltip?: #t tooltip-text: "Execute Script" action: {Action jedi test-5})
          (<Label-Item>     name: test-6                title: "&Execute Script 6" tooltip?: #t tooltip-text: "Execute Script" action: {Action jedi test-6})
          (<Label-Item>     name: test-7                title: "&Execute Script 7" tooltip?: #t tooltip-text: "Execute Script" action: {Action jedi test-7})
          (<Label-Item>     name: test-8                title: "&Execute Script 8" tooltip?: #t tooltip-text: "Execute Script" action: {Action jedi test-8})
          (<Label-Item>     name: test-9                title: "&Execute Script 9" tooltip?: #t tooltip-text: "Execute Script" action: {Action jedi test-9})
          (<Label-Item>     name: test-0                title: "&Execute Script 0" tooltip?: #t tooltip-text: "Execute Script" action: {Action jedi test-0})))
      (<Separator-Item>)
      (<Label-Item>         name: class-browser         title: "&Class Browser" icon: {Bitmap-Resource "Class"} action: {Action jedi class-browser})
      @convert
      (<Label-Item>         name: logs-viewer           title: "Logs &Viewer" icon: {Bitmap-Resource "Log"} action: {Action jedi logs-viewer})
      @convert
      (<Label-Item>         name: resources-monitor     title: "Resources Monitor" icon: {Bitmap-Resource "DesignRelations"} action: {Action jedi resources-monitor})
      @convert
      (<Label-Item>         name: profiler-manager      title: "Profiler Manager" icon: {Bitmap-Resource "Branch"} action: {Action jedi profiler-manager})
      @convert
      (<Label-Item>         name: threads-manager       title: "Threads &Manager" icon: {Bitmap-Resource "Threads"} action: {Action jedi threads-manager}))))


;;;
;;;; Tools-Menu
;;;


(class Tools-Menu extends Menu
  
  
  (form
    (<install>                                     title: "&Tools"
      (<Label-Item>                                title: "&Catalogs" icon: {Bitmap-Resource "Repository"}
        (<Menu>
          (<Label-Item>                            title: "&Catalogs Manager" icon: {Bitmap-Resource "Repository"} action: {Action jedi catalogs-manager})
          (<Label-Item>                            title: "&Update Main Catalogs" action: {Action jedi update-catalogs})))
      (<Label-Item>                                title: "Groupware" icon: {Bitmap-Resource "WorkspaceGroupware"}
        (<Menu>
          (<Label-Item>  name: compare-directories title: "Compare &Directories" icon: {Bitmap-Resource "CompareDirectories"} action: {Action jedi compare-directories})
          (<Label-Item>  name: compare-files       title: "Compare &Files" icon: {Bitmap-Resource "CompareFiles"} action: {Action jedi compare-files})))
      (<Label-Item>                                title: "&Recorder" icon: {Bitmap-Resource "Grab"}
        (<Recorder-Menu>))
      @convert
      (<Label-Item>                                title: "&Scaling" icon: {Bitmap-Resource "JEMValidator"}
        (<Menu>
          (<Label-Item>                            title: "Zoom In Mouse View" action: {Action jedi zoom-in-mouse-view})
          (<Label-Item>                            title: "Zoom Out Mouse View" action: {Action jedi zoom-out-mouse-view})
          (<Label-Item>                            title: "Unzoom Mouse View" action: {Action jedi unzoom-mouse-view})
          (<Separator-Item>)
          (<Label-Item>                            title: "Zoom In Document" action: {Action jedi zoom-in-document})
          (<Label-Item>                            title: "Zoom Out Document" action: {Action jedi zoom-out-document})
          (<Label-Item>                            title: "Unzoom Document" action: {Action jedi unzoom-document})))
      (<Label-Item>                                title: "&Capture" icon: {Bitmap-Resource "ExportPicture"}
        (<Menu>
          (<Label-Item>  name: capture-document    title: "Capture &Document" action: {Action jedi capture-document})
          (<Label-Item>  name: capture-root        title: "Capture &Root" action: {Action jedi capture-root})))
      (<Separator-Item>)
      (<Label-Item>      name: refresh-window      title: "&Refresh Window" icon: {Bitmap-Resource "Refresh"} action: {Action jedi refresh-window})
      @convert
      (<Label-Item>                                title: "&Update Remotable Code" action: {Action jedi update-remotable-code}))))


;;;
;;;; Help-Menu
;;;


(class Help-Menu extends Menu
  
  
  (form
    (<install>          title: "&Help"
      (<Label-Item>     title: "&Readme" icon: {Bitmap-Resource "Document"} action: {Action jedi readme})
      (<Separator-Item>)
      (<Label-Item>     title: "&About Jedi..." icon: {Bitmap-Resource "About"} action: {Action jedi about})))))
