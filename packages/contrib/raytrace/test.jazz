;;; Scheme Raytracer v0.1
;;;
;;; Tests
;;;
;;; 10/04/2007
;;; James Long


(library raytrace.test jazz


(import (raytrace.log)
        (raytrace.parser)
        (raytrace.tracer)
        (raytrace.vec))


(define (make-image)
  (log-args "Starting...")
  (with-output-to-file "image.ppm"
    (lambda ()
      (let ((pixels (shoot-screen-rays)))
        (log-args "Writing...")
        (display-args "P6\n")
        (display-args (vec2d-x res) " " (vec2d-y res) "\n")
        (display-args "255\n")
        (for-each (lambda (c) (write-color c))
                  pixels)))))

(make-image))
