(library jazz.platform.cairo.Cairo-Memory-Surface jazz

(import (jazz.platform.cairo)
        (jazz.platform.cairo.Cairo-Surface)
        (jazz.platform.cairo)
        (jazz.library)
        (jazz.utilities))

(class Cairo-Memory-Surface extends Cairo-Surface

  (slot linked-surface accessors generate)

  (method (initialize self width height surface)
    (set-surface self (cairo_surface_create_similar (get-surface~ surface) #x1000 (exact->inexact width) (exact->inexact height)))
    (set-linked-surface self surface)
    (nextmethod self width height))

  (method public (change-size self width height)
    (cairo_destroy (get-context self))
    (cairo_surface_destroy (get-surface self))
    (set-surface self (cairo_surface_create_similar (get-linked-surface self) #x1000 width height)))

  (method public (set-offset self x y)
    (cairo_surface_set_device_offset (get-surface self) (exact->inexact x) (exact->inexact y)))))
