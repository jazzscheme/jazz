(library jazz.user jazz


(export (jazz.user.autoload))
(import (jazz.user.autoload)
        (jazz.utilities))


(definition Userclasses
  (make-table test: eq?))


(definition public (get-userclass name)
  (table-ref Userclasses name #f))


(definition public (require-userclass name)
  (or (get-userclass name)
      (jazz.error "Unable to find user class: {s}" name)))


(definition public (set-userclass name class)
  (table-set! Userclasses name class))


(definition public (register-userclass class)
  (set-userclass (identifier-name (type-name class)) class))


(definition public (load-userclass name)
  (load-module (compose-name 'user name))
  (require-userclass name)))
