(library test.cffi jazz


(c-include "<math.h>")
(c-include "<time.h>")


(c-type void (native void))
(c-type int  (native int))
(c-type func (function (int) void))
;;(c-type test (int test))


(c-declare #<<end-of-c-declare
static void foo(int n)
{
}
end-of-c-declare
)

(definition foo
  (c-function (int) void "foo"))

(c-declare #<<end-of-c-declare
static int bar(int n)
{
    return n + n;
}
end-of-c-declare
)

(definition bar
  (c-function (int) int "bar"))

(c-declare #<<end-of-c-declare
typedef void (func)(int);

static void f(int ignore)
{
}

// static func baz (int)
// {
//     return &f;
// }
end-of-c-declare
)

;;(definition baz
;;  (c-function (int) func "baz"))

(c-declare #<<end-of-c-declare
static int yoo(int n)
{
    return n * n;
}
end-of-c-declare
)

;;(definition yoo
;;  (c-function (int) test "yoo"))

(c-structure (OSVERSIONINFO "OSVERSIONINFOW"))
(c-structure (OSVERSIONINFOEX "OSVERSIONINFOEXW" OSVERSIONINFOW)
  (int dwOSVersionInfoSize)
  (int dwMajorVersion))
)
